# This is all of the graphical code (Kivy code)
# Each screen class in the python code is a section in this code, each different section begins with <INSERT_SCREEN_NAME>: this denotes that the following code
# is for that screen.


# This is for the screen manager, it is not actually a screen so there is no graphical code. The code included for this class is to tell the screenmanager which screens it should be managing/controlling
# essentially initializes the screen manager
<MyScreenManager>:
    # Main menu -- 'menu'
    MainMenu:
    # Page 1 -- 'first'
    FuelGaugeLayout:
    # Page 2 -- 'second'
    FuelInjectionLayout:
    # Page 3 -- 'third'
    ScreenSaver:
    # Page 4 -- 'fourth'
    ErrorPage:
    # Page 5 -- 'fifth'
    TankTempPress:
    # Page 5 -- 'temp&press'
    DynamicLeak:
    ModeLocking:
    Message_settings:

# Graphical code for the main screen where all of the buttons are
<MainMenu>:

	# Gives this screen the name 'menu' so that it can be referred to by buttons in the other screens
    name: 'menu'
    # Initialises the canvas before everything else making it the background
    canvas.before:
    	# This color code is rgba and is for the background
	    Color:
	        rgba: 1, 1, 1, 1
		# Sets the size of the background to the size of the screen
	    Rectangle:
	        size: self.width, self.height

	# Creates a box layout on the screen allowing different widgets/things to be organized
    BoxLayout:
    	# Sets the orientation for the box layout --> vertical
        orientation: 'vertical'

        # Putting a horizontal box layout within the vertical layout, this means that the top portion of the screen is then split horizontally
        FloatLayout:


            #orientation: 'horizontal'
            # Sets the size of the horizontal box layout so that its

            size: root.width, root.height * (200/960)


            size_hint_y: None


            Label:
                canvas.before:
                    Color:
                        rgb: (52/255, 104/255, 162/255)
                    Rectangle:
                        size: self.width, self.height
                        pos: self.x, self.y
				font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				halign: 'right'
                pos_hint: {'top': 1}
				size_hint_x: (5.5/8.5625)
				text: u'H\u2082 Monitor'









            Label:
                #source: 'modeshow.jpg'
                pos_hint: {'top': 1, 'right': 1}
                size_hint_x: (3.0625/8.5625)
                canvas:
                    Color:
                        rgb: (235/255, 150/255, 72/255)
                    Rectangle:
                        texture: self.texture
                        size: self.width, self.height
                        pos: self.x, self.y



        GridLayout:
            cols: 2
            padding: 15, 30, 15, 30
            spacing: 20,20
            size_hint_y: 760/960
            Button:
                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: u'H\u2082 Fuel Gauge'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: app.root.current = 'first'
            Button:
                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: u'H\u2082 Injection Rate'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: app.root.current = 'second'
            Button:
                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: u'H\u2082 Leakage'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: app.root.current = 'temp&press'
            Button:

                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: 'Pressure and Temp'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: app.root.current = 'fifth'
            Button:
                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: 'Fault Information'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: app.root.current = 'fourth'


            Button:
                font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
                text: 'Toggle Engine Mode'
                background_normal: ''
			    background_color: .172549, .19215, .42, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.05
                on_touch_up: root.lock_changer(app.lock_status)

<Message_settings>:
    name: 'can_settings'
    canvas:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            # Sets the size of the horizontal box layout so that its

            size: root.width, root.height * (200/960)
            background_normal: ''

            background_color: (.28, .8, .6)

            canvas.before:
                Color:
                    rgb: (.28, .8, .6)

                Rectangle:

                    size: self.width, self.height
                    pos: self.x, self.y

            size_hint_y: None


            Image:
				source: 'menutitle.jpg'
				#size_hint_x: 0.3125
				canvas:
                    Color:
                        rgb: (1, 1, 1)
                    Rectangle:
                        texture: self.texture
                        size: self.width, self.height
                        pos: self.x, self.y

            Image:
                source: 'modeshow.jpg'
                size_hint_x: 0.45
                canvas:
                    Color:
                        rgb: (1, 1, 1)
                    Rectangle:
                        texture: self.texture
                        size: self.width, self.height
                        pos: self.x, self.y

        GridLayout:
            cols: 2
            padding: 10, 10, 10, 10
            spacing: 10, 10
            size_hint_y: 0.75




            TextInput:
                id: destination_id
                hint_text: 'Enter the new DestID'
                multiline: False
                on_text_validate: app.destination_changer(destination_id.text)
                font_size: ((self.parent.width + self.parent.height) / 3) * 0.075

            TextInput:
                id: source_id
                hint_text: 'Enter the new SourceID'
                on_text_validate: app.source_changer(source_id.text)
                multiline : False
                font_size: ((self.parent.width + self.parent.height) / 3) * 0.075


            Label:
                text: app.dest_id
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1


            Label:
                text: app.source_id
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1



        BoxLayout:
            id: reference
            orientation: 'horizontal'

            size_hint_max_y: root.height * (2.5 / 12)

            Button:
                background_normal: ''
                background_color: 0, 0, 0.8, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
                text: 'Back'
                on_release: app.root.current = 'menu'
                size: self.texture_size

            Label:
                text: app.arb_address
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.095

            Button:
                background_normal: ''
                background_color: 0, 0, 0.8, 1
                text: 'Toggle Engine Mode'
                font_size: ((self.parent.width + self.parent.height) / 3) * 0.09
                on_press: app.ModeSender()









<ModeLocking>:
    name: 'passlock'
    canvas:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height

    BoxLayout:
        orientation: 'vertical'


        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2

            Label:
                text: app.error_base
                background_color: 0, 0, 0, 0
                #size: self.texture_size
                size_hint_x: 0.25
                color: 1, 0, 0, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                #on_press: app.root.current = 'fourth'

            Label:
        	    id: gauge_title
			    text: 'H2 Fuel'

			    size_hint_x: 0.5
			    color: 1, 1, 1, 1
			    font_size: ((root.width + root.height) / 2) * 0.1
                size: self.texture_size
                bold: True

			Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
			    color: app.mode_color
        BoxLayout:
            orientation: 'horizontal'

            TextInput:
                id: password
                password: True
                #size_hint_max_y: ((self.parent.width + self.parent.height) / 3) * 0.1
                hint_text: 'Enter the Passcode'
                multiline : False
                font_size: ((self.parent.width + self.parent.height) / 3) * 0.1

            Button:
                background_normal: ''
			    background_color: root.wrong_password_ind
                text: 'Submit Password'
                on_press: root.code_tester(password.text)
                on_touch_up: password.text = ''
                font_size: ((self.parent.width + self.parent.height) / 3) * 0.1

        Label:
            font_size:
            text: root.status
            font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
	    BoxLayout:
		    id: reference
			orientation: 'horizontal'

			size_hint_max_y: root.height * (2.5 / 12)

			Button:
			    background_normal: ''
			    background_color: 0, 0, 0.8, 1
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				text: 'Back'
				on_release: app.root.current = 'menu'
				size: self.texture_size

			Label:

				size: self.texture_size
			Image:
				#font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				#text: 'Next'
				#on_release: app.root.current = 'second'
				#size: self.texture_size
				canvas.before:
				    Color:
				        rgba: 1, 1, 1, 1
				    Rectangle:
				        size: self.size
				        pos: self.pos



				#background_color: 0, 1, 0.007, 1
				source: 'logo.png'












<FuelGaugeLayout>:
    name: 'first'
    canvas.before:
	    Color:
	        rgba: 1, 1, 1, 1
	    Rectangle:
	        size: self.width, self.height
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            # Sets the size of the horizontal box layout so that its

            size: root.width, root.height * (200/960)
            background_normal: ''

            background_color: (.28, .8, .6)

            canvas.before:
                Color:
                    rgb: (.28, .8, .6)

                Rectangle:

                    size: self.width, self.height
                    pos: self.x, self.y

            size_hint_y: None


            Image:
				source: 'menutitle.jpg'
				#size_hint_x: 0.3125
				canvas:
                    Color:
                        rgb: (1, 1, 1)
                    Rectangle:
                        texture: self.texture
                        size: self.width, self.height
                        pos: self.x, self.y

            Image:
                source: 'modeshow.jpg'
                size_hint_x: 0.45
                canvas:
                    Color:
                        rgb: (1, 1, 1)
                    Rectangle:
                        texture: self.texture
                        size: self.width, self.height
                        pos: self.x, self.y

        FloatLayout:
            id: outer_lay

            Image:
                id: gauge_dash
                source: 'cadran.png'
                size_hint_max: 600, 300
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            Image:
                id: needle_dash
                canvas.before:
                    PushMatrix
                    Rotate:
                        angle: 90 - (root.dash_val * app.conversion_factor)
                        origin: root.width * 0.5, (root.height - self.height)/1.85
                canvas.after:
                    PopMatrix


                source: 'needle.png'
                size_hint_max: 50, 260
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

		BoxLayout:
		    id: reference
			orientation: 'horizontal'

			size_hint_max_y: root.height * (2.5 / 12)

			Button:

			    font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
			    background_normal: ''
			    background_color: .172549, .19215, .42, 1
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				text: 'Back'
				on_release: app.root.current = 'menu'
				size: self.texture_size

			Label:
			    font_name: '/Users/Xavier/Desktop/Kivystuff/Truck Monitoring/Truck Screen/Montserrat-Regular.ttf'
			    color: 0.9215686275, 0.5882352941, 0.2745098039, 1
				text: root.dash_label + 'kg'
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.125
				#size: self.texture_size
		    Label:



<FuelInjectionLayout>:
	name: 'second'

	canvas.before:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2

            Label:
                text: app.error_base
                background_color: 0, 0, 0, 0
                size_hint_x: 0.25
                color: 1, 0, 0, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                #on_press: app.root.current = 'fourth'

            Label:
        	    id: gauge_title
        	    size_hint_x: 0.5
			    text: 'H2 Injection'
			    text_size: self.size
			    color: 1, 1, 1, 1
			    font_size: ((root.width + root.height) / 2) * 0.1
                size: self.texture_size
                bold: True

			Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
			    color: app.mode_color


		GridLayout:
		    cols: 2

		    Label:
		        text: 'Injection Rate:'
		        font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
		    Label:
		        text: root.hInjection + 'kg/h'
		        font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
		    Label:
		        text: 'H2 Leakage:'
		        font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
		    Label:
		        text: root.leak_display + 'g/min'
		        font_size: ((self.parent.width + self.parent.height) / 2) * 0.1



		BoxLayout:
		    id: reference
			orientation: 'horizontal'
			size_hint_max_y: root.height * (2.5 / 12)

			Button:
			    background_normal: ''
			    background_color: 0, 0, 0.8, 1
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				text: 'Back'
				on_release: app.root.current = 'menu'
				size: self.texture_size
			Label:

			Image:
				#font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				#text: 'Next'
				#on_release: app.root.current = 'second'
				#size: self.texture_size

				canvas.before:
				    Color:
				        rgba: 1, 1, 1, 1
				    Rectangle:
				        size: self.size
				        pos: self.pos

				#background_color: 0, 1, 0.007, 1
				source: 'logo.png'



<ScreenSaver>:
    name: 'third'
    canvas.before:
		Color:
			rgba: 1, 1, 1, 1
		Rectangle:
			size: root.width, root.height
			pos: root.pos
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2
            Label:
                text: app.error_base
                color: 1, 0, 0, 1
                size_hint_x: 0.25
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
            Label:
                size_hint_x: 0.5
            Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.085
			    color: app.mode_color

		FloatLayout:
			size: root.width, root.height * (2.5 / 12)

			Image:
				pos: root.screen_pos[0], root.screen_pos[1]
				size_hint_max: root.width * (1 / 3), root.height * (1 / 4)

				source: 'logo.png'


<TankTempPress>:
    name: 'fifth'
    canvas.before:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2

            Label:
                text: app.error_base
                background_color: 0, 0, 0, 0
                #size: self.texture_size
                size_hint_x: 0.25
                color: 1, 0, 0, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                #on_press: app.root.current = 'fourth'

            Label:
        	    id: gauge_title
        	    size_hint_x: 0.5
			    text: 'Readings'
			    color: 1, 1, 1, 1
			    font_size: ((root.width + root.height) / 2) * 0.1
                size: self.texture_size
                bold: True

			Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
			    color: app.mode_color
        BoxLayout:
            size_hint_y: 0.225
            orientation: 'horizontal'
            Label:
			    color: 1, 1, 1, 1
			    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                size: self.texture_size
                bold: True

                text: 'Tank Temperatures:'
            Label:
			    color: 1, 1, 1, 1
			    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                size: self.texture_size
                bold: True

                text: 'Line Pressure:'
        BoxLayout:
            pos: root.x, root.height * (2.75 / 12)
            orientation: 'horizontal'
            size_hint_y: 0.5
            GridLayout:
                cols: 2
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp0
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp1
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp2
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp3
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp4
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.temp5
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.12
            GridLayout:
                cols: 1
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.press1
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.15
                Label:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    text: app.press2
                    font_size: ((self.parent.width + self.parent.height) / 3) * 0.15
        BoxLayout:
            orientation: 'horizontal'
            size_hint_max_y: root.height * (2.5 / 12)
            Button:

                background_normal: ''
                background_color: 0, 0, 0.8, 1
                on_press: app.root.current = 'menu'
                text: 'BACK'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.125
            Label:
                size_hint_y: 0.5
            Image:
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                source: 'logo.png'






<ErrorPage>:
    name: 'fourth'
    canvas.before:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2
            Label:
                text: app.error_base
                background_color: 0, 0, 0, 0
                #size: self.texture_size
                size_hint_x: 0.25
                color: 1, 0, 0, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                #on_press: app.root.current = 'fourth'
            Label:
                text: 'Fault Info:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                size: self.texture_size
                size_hint_x: 0.5
                size: self.texture_size
                bold: True
            Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
			    color: app.mode_color

        GridLayout:
            cols: 2

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: 'Error Code:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: app.error_code
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                size: self.texture_size
                valign: 'middle'
                halign: 'center'
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: 'Error Message:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: root.error_expl
                text_size: self.size
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                valign: 'middle'
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: 'MIL Light:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: app.mil_light
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: 'DPF Status:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: app.dpf_status
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: 'Coolant Temp:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50

            Label:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                text: app.coolant_temp
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.075
                bold: True
                size: self.texture_size
                padding_x: 50


        BoxLayout:
            orientation: 'horizontal'
            size_hint_max_y: root.height * (2.5 / 12)

            Button:
                background_normal: ''
                background_color: 0, 0, 0.8, 1
                text: 'Back'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1

                size: self.texture_size
                on_press: app.root.current = 'menu'
            Label:
            Image:

                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                source: 'logo.png'

<DynamicLeak>:
    name: 'temp&press'
    canvas.before:
	    Color:
	        rgba: 0.027, 0.043, 0.372, 1
	    Rectangle:
	        size: self.width, self.height
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            size: root.width, root.height * 0.2

            Label:
                text: app.error_base
                background_color: 0, 0, 0, 0
                #size: self.texture_size
                size_hint_x: 0.25
                color: 1, 0, 0, 1
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
                #on_press: app.root.current = 'fourth'

            Label:
        	    size_hint_x: 0.5
			    text: 'Mode'
			    text_size: self.size
			    color: 1, 1, 1, 1
			    font_size: ((root.width + root.height) / 2) * 0.1
                size: self.texture_size
                bold: True

			Label:
			    id: hMode
			    canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
			    text: app.engine_mode
			    size_hint_x: 0.25
			    font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
			    color: app.mode_color


        GridLayout:
            cols: 2

            Label:
                text: 'Current:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
            Label:
                text: app.current_mode
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
            Label:
                text: 'Requested:'
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1
            Label:
                text: app.engine_mode
                font_size: ((self.parent.width + self.parent.height) / 2) * 0.1



		BoxLayout:
		    id: reference
			orientation: 'horizontal'
			size_hint_y: None
			size: root.width, root.height * 0.2

			Button:
			    background_normal: ''
			    background_color: 0, 0, 0.8, 1
				font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				text: 'Back'
				on_release: app.root.current = 'menu'
				size: self.texture_size

		    Label:


			Image:
				#font_size: ((self.parent.width + self.parent.height) / 2) * 0.15
				#text: 'Next'
				#on_release: app.root.current = 'second'
				#size: self.texture_size

				canvas.before:
				    Color:
				        rgba: 1, 1, 1, 1
				    Rectangle:
				        size: self.size
				        pos: self.pos

				#background_color: 0, 1, 0.007, 1
				source: 'logo.png'


            
